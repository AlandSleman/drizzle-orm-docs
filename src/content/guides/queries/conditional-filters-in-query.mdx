---
title: Conditional filters in query
---
import Section from "@mdx/Section.astro";
import IsSupportedChipGroup from "@mdx/IsSupportedChipGroup.astro";

**Prerequisites**
- Get started with [PostgreSQL](/docs/get-started-postgresql), [MySQL](/docs/get-started-mysql), [SQLite](/docs/get-started-sqlite);
- [Select statement](/docs/select);
- [Filtering](/docs/select#filtering);
- [Filter operators](/docs/operators);

<IsSupportedChipGroup chips={{PostgreSQL: true, MySQL: true, SQLite: true}}/>

To pass a conditional filter in query you can use `.where()` method and logical operator like below:

<Section>
```tsx copy {7}
import { ilike } from 'drizzle-orm';

const db = drizzle(...)

await db
  .select()
  .from(posts)
  .where(searchParam && ilike(posts.title, searchParam));
```

```sql
select "id", "title", "category", "views_count" from "posts" where "posts"."title" ilike 'Artificial Intelligence';
```
</Section>

To combine conditional filters you can use `and()` or `or()` with logical operators in `.where()` method like below:

<Section>
```tsx copy {8,9,10,11,12,13,14}
import { and, gt, ilike, inArray } from 'drizzle-orm';

const db = drizzle(...)

await db
  .select()
  .from(posts)
  .where(
    and(
      searchParam && ilike(posts.title, searchParam),
      filterByCategories.length > 0 ? inArray(posts.category, filterByCategories) : undefined,
      minViews > 100 ? gt(posts.viewsCount, minViews) : undefined,
    ),
  );
```

```sql
select "id", "title", "category", "views_count" from "posts"
where ("posts"."title" ilike 'Artificial Intelligence' and "posts"."category" in ('Technology', 'Science', 'Art') and "posts"."views_count" > 200);
```
</Section>

If you need to combine conditional filters in different part of the project you can create a variable, push filters and then pass it to `and()` or `or()` operators in `.where()` method like below:

<Section>
```tsx copy {5,8,12,16,22}
import { SQL, and, gt, ilike, inArray } from 'drizzle-orm';

const db = drizzle(...)

const where: SQL[] = [];

if (searchParam) {
  where.push(ilike(posts.title, searchParam));
}

if (filterByCategories.length > 0) {
  where.push(inArray(posts.category, filterByCategories));
}

if (minViews > 200) {
  where.push(gt(posts.viewsCount, minViews));
}

await db
  .select()
  .from(posts)
  .where(and(...where));
```

```sql
select "id", "title", "category", "views_count" from "posts"
where ("posts"."title" ilike 'Artificial Intelligence' and "posts"."category" in ('Technology', 'Science', 'Art') and "posts"."views_count" > 200);
```
</Section>
